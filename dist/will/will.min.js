/*! WillJS v1.8.1 | github.com/kawamanza/willjs/ */
(function(v,M,p,B){function w(a){this.name=a;this.constructor=w}function s(a){return"string"===typeof a}function t(a){return"[object Array]"===U.call(a)}function y(a){return"object"!==typeof a}function r(a){return"function"===typeof a}function C(a,b){var c,d,e,f;for(d in b)if(b.hasOwnProperty(d))if(f=b[d],":"==d.charAt(0))a[d.substr(1)]=f;else if(1<(c=d.split(/\./)).length){d=c.shift();e=a[d];if(y(e)||t(e))e=a[d]={};d=c.join(".");c=f;d&&((c={})[d]=f);C(e,c)}else/\W$/.test(d)?(d=RegExp["$`"],c={get:function(){},
set:function(){},enumerable:!0,configurable:!0},r(f)?"="==RegExp["$&"]?c.set=f:c.get=f:C(c,f),Object.defineProperty(a,d,c)):a[d]=f}function m(a){for(var b,c,d,e=1,f=arguments,l=f.length;e<l;e++)b=f[e],s(b)?d=b:b&&(c=b,d&&((c={})[d]=b),C(a,c));return a}function V(a,b){return function(){return b.apply(a,arguments)}}function D(a,b){var c=q.createElement(a),d;for(d in b)b.hasOwnProperty(d)&&c.setAttribute(d,b[d]);return c}function E(a,b){var c,d,e,f,l,g,h,k,n;s(a)?f=/\@/.test(a):(c=a.src||a.href,d=a.getAttribute("data-willjs-id"),
a=(d?d+"@":"")+c);if(W.test(a)){d=RegExp.$1;c=RegExp.$2;e=RegExp.$3;h=c.charAt(0);k="^"==h;n="+"==h;if(k||n)c=c.substr(1);b&&"."==c.charAt(0)&&(c=D("script",{src:b+c}).src);/^\/\//.test(c)&&"https:"!=X&&(c="http:"+c)}l=Y.test(c);d||(g=c.split(Z),h=g.pop(),d=$.test(h)?RegExp.$1:h,l&&(aa.test(g[0])&&g.shift(),g.push(d),d=g.join("_").replace(/:/,"-")));m(this,{id:d,fixedId:f,pre:k,pos:n,css:l,tn:l?"link":"script",qs:e||"",href:c})}function ba(a){var b=a.id,c=a.href,d=a.css,e=q.getElementsByTagName(a.tn),
f,l=e.length,g,h;for(f=0;f<l;)if(g=e[f++],h=new E(g),h.id===b)return a.fixedId&&d&&h.href!=c&&(g.href=c+(a.qs||h.qs)),[d,g];return!1}function ca(a,b,c,d){var e=!1;a.onload=a.onreadystatechange=function(){var f=this.readyState;e||f&&"loaded"!==f&&"complete"!==f||(e=!0,c("success"),a.onload=a.onreadystatechange=p,a.onerror=a.onabort=p,d&&b&&a.parentNode&&b.removeChild(a))};a.onerror=a.onabort=function(){e=!0;c("error");a.onload=a.onreadystatechange=p;a.onerror=a.onabort=p;b&&a.parentNode&&b.removeChild(a)}}
function F(){return q.getElementsByTagName("head")[0]||q.documentElement}function N(a,b){var c,d=q.getElementsByTagName("link"),e=d.length;for(c=0;c<e;c++){if(d[c]===a)return!0;if(d[c]===b)return!1}}function z(a,b){(b=b||q.getElementsByTagName("link")[0])?F().insertBefore(a,b):F().appendChild(a)}function x(a){m(this,{queue:[],active:!1,run:a})}function da(a,b,c,d,e){var f=F(),l=b.css,g=b.href,h=b.qs,k=a.cfg.queryString;h?k=h.substr(1):r(k)?k=k(g):k||(k=(h=a.info.qs)?h.substr(1):"");a={};a["data-willjs-id"]=
b.id;l&&(a.rel="stylesheet");a[l?"href":"src"]=g+(k?"?"+k:"");a=D(b.tn,a);l?(b.pre?z(a,c):c&&c.nextSibling?f.insertBefore(a,c.nextSibling):z(a),d("success",a)):(ca(a,f,d,e),f.appendChild(a))}function O(a,b,c,d){var e=this,f=!1,l,g,h,k,n;d||(d=G);k=h=function(){f||(n=d.info,e=this,l=arguments,c||(g=l),k.pluginFile==b&&n.min&&(b=k.pluginFile.replace(ea,".min.js")),d.use("willjsPlugin-"+a+"@"+n.dir+b+n.qs)(function(b){f=!0;"success"===b&&(h=e[a].apply(e,g),c&&h.apply(e,l))}))};c&&(k=function(){g=arguments;
e=this;return function(){h.apply(e,arguments)}});k.pluginFile=b;e[a]=k}function P(a,b){"cfg"in a||(m(a,{registry:{},cfg:m(new Q,{processors:new H,assetsList:{jquery:["//ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js?"]},assetsTargetList:{js:{},css:{}},domains:{local:{format:"js"}},packages:{}})}),"use"in a||m(a,u));r(b)&&b(a.cfg)}function R(a,b,c){var d="impl";s(c)&&(d=c,c=b[d]);b[d]=function(){var e=arguments,f=b.assets;b.getResponder?(c=b.getResponder(a),delete b.getResponder):b.getImpl&&
(c=b.getImpl(a),delete b.getImpl);f&&f.length?I(a,"loadDependenciesAndCall",[a,b,e]):(b[d]="impl"==d?V(a,c):c).apply(b,e)}}function J(a,b,c){if(!y(b)){s(c)&&(c=new A(a,c));var d=b.impl,e=b.assets;if(r(d||b.getImpl||b.getResponder))c=c.entry,c.assets=y(e)||!t(e)?[]:e,c.getResponder=b.getResponder||b.getImpl,R(a,c,d),c.rescue=b.rescue||c.rescue;else for(d in b)c.name=d,J(a,b[d],c)}}function A(a,b,c){var d=a.cfg,e=d.domains,f=a.modes,l,g;fa.test(b)&&(b=RegExp.$3,g=RegExp.$2||d.packages[b]||d.defaultPackage,
l=RegExp.$1||"local");e=e[l]||e.local||{};m(this,{domainName:l,packageName:g,name:b,fullname:((g===d.defaultPackage?"":g+".")+b).replace(/\./g,"/"),version:c||"latest",base:e.domain,format:e.format||"json",prod:(e.mode||d.mode||f.DEV)==f.PROD,ctx:a})}function I(a,b,c){a=a.cfg.processors;var d=a[b];d||(d=a[b]=new x(function(a){r(a)&&a()}));d.process(c)}function S(a,b,c){var d={assets:b};return function(b,f){if(!d.impl){var l,g;r(b)?(l=function(){b("success")},g=function(){b("error")}):l=g=function(){};
R(a,d,l);d.dir=f;d.rescue=g;d.removeElement=c;d.impl()}}}function H(){}function Q(){}var G,u={},Y=/\.css$/,ea=/\.js$/,Z=/\/+/,aa=/^[\^\+]?(?:\w+:|)$/,K=/^(?:[^@]+@)?\|/,$=/^([\w\-\.]+?)(?:\.min|\-\d+(?:\.\d+)*(?:\.?\w+)?)*\.(?:css|js)$/,W=/^(?:([\w\-\.]+)\@)?([^#\?]+)(?:(\?[^#]*))?/,T=/^[\w\-]+$/,fa=/^(?:(\w+):)?(?:(\w+)\.)?(\w+)$/,L=Array.prototype.slice,U=Object.prototype.toString,X=v.location.protocol,q=v.document;m(x.prototype,{sched:function(){var a=this;setTimeout(function(){a.process()},0)},
process:function(a){var b=this,c=b.queue;if(arguments.length){if(y(a)||!t(a))a=[a];c.push(a);setTimeout(function(){c.length&&!b.active&&(b.active=!0,b.process())},2)}else if(c.length){a=c.shift();try{!1!==b.run.apply(b,a)&&b.sched()}catch(d){throw b.sched(),d;}}else b.active=!1}});m(A.prototype,{"dir!":function(){var a=this._dir(),b;if(/\{/.test(a)){var c=a.match(/([^\{]+|\{[^\}]+\})/gm),d=c.length;for(b=0;b<d;b++)a=c[b],"{"==a.charAt(0)&&(c[b]=this[a.substr(1,a.length-2)]||a);a=c.join("")}return a},
_dir:function(){var a=this.ctx,b=this.packageName;return(this.base||a.info.dom)+(this.prod||b==a.cfg.defaultPackage||-1!=this.base.indexOf("{fullname}")?"":b+"/")},"url!":function(){return this.dir+(this.prod?this.packageName:this.name)+"."+this.format},"entry!":function(){var a=this.ctx.registry,b=this.domainName,c=this.packageName,a=a[b]||(a[b]={}),c=a[c]||(a[c]={}),a=this.name;c[a]&&(c[a].dir=this.dir);return c[a]||(c[a]={rescue:function(){},dir:this.dir})},toString:function(){return this.domainName+
":"+this.packageName+"."+this.name}});m(u,{use:function(a){return S(this,t(a)?a:L.call(arguments,0),!1)},addComponent:function(a,b){1==arguments.length&&(b=a,a=new A(this,"unknown"));J(this,b,a)},define:function(a,b,c){r(b)&&(c=b,b=[]);this.addComponent(a,{assets:b,getResponder:c})},addProcessor:function(a,b){var c=this.cfg.processors;c[a]||(c[a]=new x(b))},process:function(a){I(this,a,L.call(arguments,1))},modes:{DEV:2,PROD:1},as:function(a){return a?v[a]||(v[a]=new w(a)):a},configure:function(a){this.configured=
!0;P(this,a);return this},dir:function(a,b){b||(b=a,a=this.info.dir);a+=/\/$/.test(a)?"":"/";a=D("script",{src:a+b}).src;return a=a.replace(/%7[bB]/g,"{").replace(/%7[dD]/g,"}")},":info!":function(){var a=this._info,b,c,d,e;if(!a)for(b=q.getElementsByTagName("script"),B||(B="will"),d=0,c=b.length;d<c;d++)if(e=new E(b[d]),e.id==B){b=e.href;this._info=a={href:b,qs:e.qs,min:/\.min\.js/.test(b),dir:b=b.replace(/\/(?:will\/)*[^\/]+$/,"/will/"),dom:b+"components/"};break}return a}});m(u,"u",{hit:O,Processors:H,
Processor:x,Path:A,process:I,requireAssets:S,registerFunctions:J,extend:m});m(w.prototype,u);m(Q.prototype,{mode:u.modes.DEV,version:"1.8.0",addDomain:function(a,b,c,d){b&&(b+=/\/$/.test(b)?"":"/");this.domains[a]={format:s(c)?c:c?"js":"json",domain:b,mode:d}},addAssetsList:function(a){if(!T.test(a))throw Error("invalid term: "+a);this.assetsList[a]=L.call(arguments,1)},translateAssetTo:function(a,b){s(b)&&(b=b.split(","));t(a)||(a=[a]);for(var c=this.assetsTargetList,d=0,e=b.length,f,c=c[/\.css/.test(a[0])?
"css":"js"];d<e;)f=b[d++],-1==a.indexOf(f)&&(c[f]=a)},defaultPackage:"root",registerPackage:function(a,b){var c=b.split(/,/),d,e,f;d=this.packages;f=0;for(e=c.length;f<e;)d[c[f++]]=a}});H.prototype.loadDependenciesAndCall=new x(function(a,b,c){var d=this,e=a.cfg,f=e.assetsList,l=e.assetsTargetList,e=e.debug,g,h=b.assets,k=b.dir,n,m;if(h.length){if(T.test(g=h[0]))if(t(g=f[g])){n=0;for(f=g.length;n<f;n++)if(/\.css(?:[?#].*)?$/.test(g[n])){/\^/.test(g[n])&&(delete b.bottomCss,delete b.lastCss);break}g=
g.slice(0);g.splice(0,0,0,1);h.splice.apply(h,g)}else{b.rescue.apply(p,c);return}g=new E(h[0],k);m=g.pre;f=g.pos;if(k=ba(g)){h.shift();if(k[0]){if(a=b.lastCss)l=b.bottomCss.nextSibling,m&&N(a,k[1])?z(k[1],a):l&&N(k[1],b.bottomCss)&&z(k[1],l);a&&m||(b.bottomCss=k[1]);b.lastCss=k[1]}for(;h.length&&K.test(h[0]);)h.shift();b.impl.apply(p,c)}else if(k=l[g.css?"css":"js"][g.id])e&&e('** skipping asset "'+g.href+'"'),h.splice.apply(h,[0,1].concat(k)),b.impl.apply(p,c);else return e&&e('** loading asset "'+
g.href+'"'),f&&(k=q.getElementsByTagName(g.tn),0!=(f=k.length)&&(b.lastCss=b.bottomCss=k[f-1])),da(a,g,b[m?"lastCss":"bottomCss"],function(a,e){try{if(1<h.length&&K.test(h[1]))if("success"===a){do h.shift();while(1<h.length&&K.test(h[1]))}else h[1]=h[1].replace(/\|/,""),a="success";"success"===a?(h.shift(),e&&(b.lastCss&&m||(b.bottomCss=e),b.lastCss=e),b.impl.apply(p,c)):b.rescue.apply(p,c)}finally{d.sched()}},b.removeElement),!1}else b.impl.apply(p,c)});v[M]=G=new w(M);P(G);u.u.hit("loadComponent",
"componentLoader.js");O.call(w.prototype,"call","callComponent.js",!0)})(window,"will",null);
